import i18n from "i18next";
import { initReactI18next } from "react-i18next";

const resources = {
  ko: {
    translation: {
      language: {
        label: "언어",
        korean: "한국어",
        english: "English",
      },
      theme: {
        toggle: "테마 전환",
        light: "라이트",
        dark: "다크",
      },
      nav: {
        signIn: "로그인",
        signOut: "로그아웃",
        goToLogin: "로그인으로 이동",
        backToHome: "홈으로 돌아가기",
      },
      home: {
        tagline: "역사는 반복된다",
        dateBadge: "오늘",
        mysteryStock: "이 미스터리 종목",
        stepLabel: "단계 {{step}}",
        heroPrefix: "{{name}}",
        heroRise: "상승",
        heroScore: "{{score}}",
        heroSuffix: "년 전",
        heroSubtitle: "오늘 이 날짜에",
        viewDashboard: "대시보드 보기",
        startSignals: "무료 데일리 시그널 시작",
        seeHowItWorks: "작동 방식 보기",
        topPicks: "다음 주 Top 3 종목",
        howItWorks: "작동 방식",
        step1Title: "데일리 계절성 스캔",
        step1Body: "지난 10년 가격 데이터를 스캔해 오늘 날짜 수익률 패턴을 점수화합니다.",
        step2Title: "AI 컨플루언스 스코어",
        step2Body: "RSI 과매도, MACD 상승 전환 등 기술적 지표가 겹치면 점수를 보정합니다.",
        step3Title: "상위 3개 시그널",
        step3Body: "매일 아침 가장 강력한 3개 셋업을 공개합니다. 로그인 시 종목이 표시됩니다.",
        getFullAccess: "전체 접근 권한",
        signInToUnlock: "로그인하여 모든 종목을 확인하세요",
        googleOnly: "Google 로그인만 지원합니다. 신규 계정은 자동으로 생성됩니다.",
        basedOnHistory: "과거 패턴 기반. 투자 판단의 책임은 사용자에게 있습니다.",
      },
      search: {
        placeholder: "티커 입력 (예: AAPL)",
        go: "검색",
        searching: "검색 중...",
        errorNoData: "데이터가 없습니다.",
        errorFailed: "검색에 실패했습니다. 다시 시도해주세요.",
        latestRank: "최신 순위",
        winRate: "승률",
        aiScore: "AI 점수",
        signInReveal: "로그인하면 전체 종목과 히스토리를 확인할 수 있습니다.",
        revealStock: "종목 공개",
        footer: "종목의 계절성 패턴을 확인하세요.",
      },
      stockCard: {
        rankTop: "Top",
        rankRunnerUp: "2위",
        rankThird: "3위",
        winRate: "승률",
        avgReturn: "평균 수익률",
        lockedTopTitle: "프리미엄 필요",
        lockedTopBody: "로그인 후 상위 종목을 확인하세요.",
        lockedSecondTitle: "미리보기 잠김",
        lockedSecondBody: "로그인하여 시그널을 확인하세요.",
        lockedThirdTitle: "멤버 전용 시그널",
        lockedThirdBody: "로그인 후 3위 시그널을 확인하세요.",
        lockedHint: "로그인 후 전체 정보가 표시됩니다.",
        hot: "HOT",
      },
      login: {
        title: "전체 접근 권한을 위해 로그인하세요",
        subtitle: "Google 로그인만 지원합니다. 신규 사용자는 자동으로 생성됩니다.",
        oauthLabel: "Google OAuth",
        redirectNote: "로그인 성공 시 {{target}}로 이동합니다.",
        errorMissingCode: "로그인 과정에서 코드가 누락되었습니다. 다시 시도해주세요.",
        errorExchangeFailed: "토큰 교환에 실패했습니다. 다시 시도해주세요.",
        errorNoUser: "사용자 정보를 확인할 수 없습니다. 다시 시도해주세요.",
        errorProfileUpsertFailed: "프로필 저장에 실패했습니다. 다시 시도해주세요.",
        errorGoogleSignInFailed: "Google 로그인에 실패했습니다. 다시 시도해주세요.",
        errorDefault: "로그인 중 오류가 발생했습니다. 다시 시도해주세요.",
      },
      dashboard: {
        title: "대시보드",
        welcome: "{{name}}님, 다시 오신 것을 환영합니다.",
        subtitle: "관심 종목, 시그널 알림, 시즌성 백테스트를 한곳에서 관리하세요.",
        marketTitle: "시장 대시보드",
        marketSubtitle: "KST 기준 자동 전환, 깃발 버튼으로 수동 고정할 수 있습니다.",
        marketAuto: "자동",
        marketNow: "현재 KST {{time}}",
        marketKorean: "한국 시장",
        marketUS: "미국 시장",
        marketKoreanDetail: "KOSPI · KOSDAQ",
        marketUSDetail: "NASDAQ · S&P 500",
        overview: "시장 스냅샷",
        movers: "상위 변동 종목",
        loading: "데이터 불러오는 중...",
        noData: "시장 데이터가 없습니다.",
        lastUpdate: "업데이트 {{date}}",
      },
      auth: {
        signInPanel: "로그인",
        signInWithGoogle: "Google로 로그인",
      },
      user: {
        fallback: "사용자",
      },
    },
  },
  en: {
    translation: {
      language: {
        label: "Language",
        korean: "한국어",
        english: "English",
      },
      theme: {
        toggle: "Toggle theme",
        light: "Light",
        dark: "Dark",
      },
      nav: {
        signIn: "Sign in",
        signOut: "Sign out",
        goToLogin: "Go to login",
        backToHome: "Back to home",
      },
      home: {
        tagline: "History Repeats Itself",
        dateBadge: "Today",
        mysteryStock: "This Mystery Stock",
        stepLabel: "Step {{step}}",
        heroPrefix: "{{name}}",
        heroRise: "rose",
        heroScore: "{{score}}",
        heroSuffix: "years ago",
        heroSubtitle: "on this day",
        viewDashboard: "View Dashboard",
        startSignals: "Start Free Daily Signals",
        seeHowItWorks: "See How It Works",
        topPicks: "Top 3 Picks for Next Week",
        howItWorks: "How It Works",
        step1Title: "Daily Seasonality Scan",
        step1Body: "We scan 10 years of price history and score how often each ticker wins on today's date.",
        step2Title: "AI Confluence Score",
        step2Body: "Win rate is boosted when technical indicators line up (RSI oversold or bullish MACD).",
        step3Title: "Top 3 Signals",
        step3Body: "We publish the strongest three setups each morning. Sign in to reveal the tickers.",
        getFullAccess: "Get Full Access",
        signInToUnlock: "Sign in to unlock all picks",
        googleOnly: "Google login only. New users will be created automatically.",
        basedOnHistory: "Based on historical patterns. Not financial advice.",
      },
      search: {
        placeholder: "Enter ticker (e.g., AAPL)",
        go: "Go",
        searching: "Searching...",
        errorNoData: "No data found.",
        errorFailed: "Search failed. Try again.",
        latestRank: "Latest Rank",
        winRate: "Win Rate",
        aiScore: "AI Score",
        signInReveal: "Sign in to reveal the full stock identity and history.",
        revealStock: "Reveal Stock",
        footer: "Explore the seasonal pattern behind your stock.",
      },
      stockCard: {
        rankTop: "Top",
        rankRunnerUp: "Runner-up",
        rankThird: "Third",
        winRate: "Win Rate",
        avgReturn: "Avg Return",
        lockedTopTitle: "Premium Required",
        lockedTopBody: "Sign in to unlock the top picks.",
        lockedSecondTitle: "Preview Locked",
        lockedSecondBody: "Sign in to reveal the signals.",
        lockedThirdTitle: "Members Only",
        lockedThirdBody: "Sign in to reveal the third signal.",
        lockedHint: "Sign in to reveal the full details.",
        hot: "HOT",
      },
      login: {
        title: "Sign in to unlock full access",
        subtitle: "We only support Google login. New users will be created automatically.",
        oauthLabel: "Google OAuth",
        redirectNote: "On success you will be redirected to {{target}}.",
        errorMissingCode: "Code missing during sign-in. Please try again.",
        errorExchangeFailed: "Token exchange failed. Please try again.",
        errorNoUser: "Unable to verify the user. Please try again.",
        errorProfileUpsertFailed: "Failed to update profile. Please try again.",
        errorGoogleSignInFailed: "Google sign-in failed. Please try again.",
        errorDefault: "An error occurred during sign-in. Please try again.",
      },
      dashboard: {
        title: "Dashboard",
        welcome: "Welcome back, {{name}}.",
        subtitle: "Manage watchlists, signal alerts, and seasonality backtests in one place.",
        marketTitle: "Market Dashboard",
        marketSubtitle: "Auto-switches by KST, or lock a market with the flags.",
        marketAuto: "Auto",
        marketNow: "KST {{time}}",
        marketKorean: "Korean Market",
        marketUS: "US Market",
        marketKoreanDetail: "KOSPI · KOSDAQ",
        marketUSDetail: "NASDAQ · S&P 500",
        overview: "Market Snapshot",
        movers: "Top Movers",
        loading: "Loading data...",
        noData: "No market data available.",
        lastUpdate: "Updated {{date}}",
      },
      auth: {
        signInPanel: "Sign In",
        signInWithGoogle: "Sign in with Google",
      },
      user: {
        fallback: "User",
      },
    },
  },
};

const savedLanguage = typeof window !== "undefined" ? localStorage.getItem("lang") : null;

if (!i18n.isInitialized) {
  i18n.use(initReactI18next).init({
    resources,
    lng: savedLanguage ?? "ko",
    fallbackLng: "ko",
    interpolation: {
      escapeValue: false,
    },
  });
}

export default i18n;
